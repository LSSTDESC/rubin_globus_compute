amqp_port: 443
display_name: RubinContainerEndpoint
engine:
  max_workers_per_node: 1
  container_type: apptainer
  container_uri: <PLACEHOLDER --> /full/path/to/your/file.sing>
  container_cmd_options: --fakeroot
  provider:
    type: PBSProProvider
    launcher:
      type: SimpleLauncher
    account: IRIBeta
    cpus_per_node: 64
    select_options: ngpus=0
    scheduler_options: '#PBS -l filesystems=home:eagle'
    queue: debug
    init_blocks: 0
    max_blocks: 1
    min_blocks: 0
    nodes_per_block: 1
    walltime: 01:00:00
    worker_init: |
      ml use /soft/modulefiles
      ml spack-pe-base/0.8.1
      ml use /soft/spack/testing/0.8.1/modulefiles
      ml apptainer/main
      ml load e2fsprogs
      export BASE_SCRATCH_DIR=/local/scratch/
      export APPTAINER_TMPDIR=$BASE_SCRATCH_DIR/apptainer-tmpdir
      mkdir -p $APPTAINER_TMPDIR
      export APPTAINER_CACHEDIR=$BASE_SCRATCH_DIR/apptainer-cachedir
      mkdir -p $APPTAINER_CACHEDIR
      export HTTP_PROXY=http://proxy.alcf.anl.gov:3128
      export HTTPS_PROXY=http://proxy.alcf.anl.gov:3128
      export http_proxy=http://proxy.alcf.anl.gov:3128
      export https_proxy=http://proxy.alcf.anl.gov:3128
      module unload xalt
  type: GlobusComputeEngine

  